<?php
/**
 * Magento
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the Academic Free License (AFL 3.0)
 * that is bundled with this package in the file LICENSE_AFL.txt.
 * It is also available through the world-wide-web at this URL:
 * http://opensource.org/licenses/afl-3.0.php
 * If you did not receive a copy of the license and are unable to
 * obtain it through the world-wide-web, please send an email
 * to license@magentocommerce.com so we can send you a copy immediately.
 *
 * DISCLAIMER
 *
 * Do not edit or add to this file if you wish to upgrade Magento to newer
 * versions in the future. If you wish to customize Magento for your
 * needs please refer to http://www.magentocommerce.com for more information.
 *
 * @category    design
 * @package     base_default
 * @copyright   Copyright (c) 2013 Magento Inc. (http://www.magentocommerce.com)
 * @license     http://opensource.org/licenses/afl-3.0.php  Academic Free License (AFL 3.0)
 */
/**
 * @var Mage_Page_Block_Html_Header $this
 */
?>
<div class="header-container">
    
    <div class="header-topcontainer">
        <div class="container header-top header">
            <div class="grid-full">
                <?php echo $this->getChildHtml('store_language'); ?>            
        
                <?php if(Mage::getStoreConfig('mygeneral/header/header_type') == 'header2') { ?>
                    <div class="top-links links-wrapper-separators item-right header2">
                        <?php echo $this->getChildHtml('topLinks'); ?>
                    </div>
                <?php } ?>
                
                <?php echo $this->getLayout()->createBlock('directory/currency')->setTemplate('directory/currency.phtml')->toHtml(); ?>
            </div>
        </div>
    </div>
    <?php if(Mage::getStoreConfig('mygeneral/header/header_type') == 'default') { ?>
    <div class="header-primarycontainer default">
        <div class="container header-primary header">
            <div class="grid-full">
                <div class="v-grid-container">
                    <div class="grid12-4 v-grid">
                        <div class="top-links links-wrapper-separators">
                            <?php echo $this->getChildHtml('topLinks'); ?>
                        </div>
                        <?php echo $this->getLayout()->createBlock('cms/block')->setBlockId('block-header-top1')->toHtml() ?>                                   
                    </div>
                    <div class="grid12-4 v-grid">
                        <div class="logo">
                            <a href='<?php echo $this->getUrl(''); ?>' title='<?php echo $this->getLogoAlt(); ?>'>
                                <strong><?php echo $this->getLogoAlt(); ?></strong>
                                <img src='<?php echo $this->getLogoSrc(); ?>' alt='<?php echo $this->getLogoAlt(); ?>' />
                            </a>
                        </div>    
                    </div>
                    <div class="grid12-4 v-grid">
                        <?php echo $this->getChildHtml('cart_sidebar') ?>
                    <?php if(Mage::getStoreConfig('mygeneral/header/displayheader_wishlistbox')) { ?>
                        <div class="wishlist dropdown">
                            <div class="dropdown-toggle cover">
                                <div class="feature-icon-hover">
                                    <span class="icon first close-to-text force-no-bg-color">
                                        <i class="fa fa-heart-o"></i>
                                    </span>                                    
                                    <?php $wishlistItemCount = count(Mage::helper('wishlist')->getWishlistItemCollection());?>
                                    <a href="<?php echo $this->helper('wishlist')->getListUrl()?>" title="My Wishlist">MY WISHLIST :</a>
                                    <strong><?php if($wishlistItemCount > 0) {echo $wishlistItemCount;} else{echo $wishlistItemCount;}?></strong>
                                </div>
                            </div>
                        </div>
                    <?php } ?>
                        <?php echo $this->getChildHtml('topSearch'); ?>
                    </div>    
                </div>
            </div>
        </div>         
    </div>
    <?php } else { ?>
    <div class="header-primarycontainer header2">
        <div class="container header-primary header">
            <div class="grid-full">
                <div class="v-grid-container">
                    <div class="grid12-3 v-grid">
                        <div class="logo">
                            <a href='<?php echo $this->getUrl(''); ?>' title='<?php echo $this->getLogoAlt(); ?>'>
                                <strong><?php echo $this->getLogoAlt(); ?></strong>
                                <img src='<?php echo $this->getLogoSrc(); ?>' alt='<?php echo $this->getLogoAlt(); ?>' />
                            </a>
                        </div>                                       
                    </div>
                    <div class="grid12-4 v-grid">
                        <?php echo $this->getLayout()->createBlock('cms/block')->setBlockId('block-header-top1')->toHtml() ?>
                        <?php echo $this->getChildHtml('topSearch'); ?>
                    </div>
                    <div class="grid12-5 v-grid">
                        <?php echo $this->getChildHtml('cart_sidebar') ?>
                    <?php if(Mage::getStoreConfig('mygeneral/header/displayheader_wishlistbox')) { ?>
                        <div class="wishlist dropdown">
                            <div class="dropdown-toggle cover">
                                <div class="feature-icon-hover">
                                    <span class="icon first close-to-text force-no-bg-color">
                                        <i class="fa fa-heart-o"></i>
                                    </span>                                    
                                    <?php $wishlistItemCount = count(Mage::helper('wishlist')->getWishlistItemCollection());?>
                                    <a href="<?php echo $this->helper('wishlist')->getListUrl()?>" title="My Wishlist">MY WISHLIST :</a>
                                    <strong><?php if($wishlistItemCount > 0) {echo $wishlistItemCount;} else{echo $wishlistItemCount;}?></strong>
                                </div>
                            </div>
                        </div>
                    <?php } ?>
                        
                    </div>    
                </div>
            </div>
        </div>         
    </div>
    <?php } ?>
    
    <?php if(!Mage::getStoreConfig('mygeneral/menu/menuwidth')) { ?>
        <div class="nav-maincontainer<?php if(Mage::getStoreConfig('mygeneral/header/header_type') == 'header2') { ?> header2<?php } ?>">
            <div class="container">
                <div class="grid-full">
                    <?php echo $this->getChildHtml('topContainer'); ?>
                    <?php if(Mage::getStoreConfig('mygeneral/header/sticky_header_with_logo') && Mage::getStoreConfig('mygeneral/header/sticky_header')) { ?>
                        <div class="logo">
                            <a href='<?php echo $this->getUrl(''); ?>' title='<?php echo $this->getLogoAlt(); ?>'>
                                <strong><?php echo $this->getLogoAlt(); ?></strong>
                                <img src='<?php echo $this->getLogoSrc(); ?>' alt='<?php echo $this->getLogoAlt(); ?>' />
                            </a>
                        </div>
                    <?php } ?>
                    <?php echo $this->getChildHtml('topMenu') ?>
                    <?php if(Mage::getStoreConfig('mygeneral/header/sticky_header_with_shopingcart') && Mage::getStoreConfig('mygeneral/header/sticky_header')) { ?>
                        <?php echo $this->getChildHtml('cart_sidebar') ?>
                    <?php } ?>
                </div>
            </div>
        </div>
    <?php } else { ?>
        <div class="nav-maincontainer container template<?php if(Mage::getStoreConfig('mygeneral/header/header_type') == 'header2') { ?> header2<?php } ?>">
            <div class="grid-full">
                <?php echo $this->getChildHtml('topContainer'); ?>
                <?php if(Mage::getStoreConfig('mygeneral/header/sticky_header_with_logo') && Mage::getStoreConfig('mygeneral/header/sticky_header')) { ?>
                    <div class="logo">
                        <a href='<?php echo $this->getUrl(''); ?>' title='<?php echo $this->getLogoAlt(); ?>'>
                            <strong><?php echo $this->getLogoAlt(); ?></strong>
                            <img src='<?php echo $this->getLogoSrc(); ?>' alt='<?php echo $this->getLogoAlt(); ?>' />
                        </a>
                    </div>
                <?php } ?>
                <?php echo $this->getChildHtml('topMenu') ?>
                <?php if(Mage::getStoreConfig('mygeneral/header/sticky_header_with_shopingcart') && Mage::getStoreConfig('mygeneral/header/sticky_header')) { ?>
                    <?php echo $this->getChildHtml('cart_sidebar') ?>
                <?php } ?>
            </div>
        </div>
    <?php } ?>    
</div>
<?php if(Mage::getStoreConfig('mygeneral/header/sticky_header')) { ?>
<script>
// header fixed
var myHeader = j$('.nav-maincontainer');
myHeader.data( 'position', myHeader.position() );
j$(window).scroll(function(){
    var hPos = myHeader.data('position'), scroll = getScroll();
    if ( hPos.top < scroll.top ){
        myHeader.addClass('fixed');
    }
    else {
        myHeader.removeClass('fixed');
    }
});

function getScroll () {
    var b = document.body;
    var e = document.documentElement;
    return {
        left: parseFloat( window.pageXOffset || b.scrollLeft || e.scrollLeft ),
        top: parseFloat( window.pageYOffset || b.scrollTop || e.scrollTop )
    };
}
// end header fixed
</script>
<?php } ?>